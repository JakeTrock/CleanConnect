/*! jcs 2020-01-06 */

const express=require("express"),mongoose=require("mongoose"),bodyParser=require("body-parser"),passport=require("passport"),cors=require("cors"),user=require("./routes/User.js"),tag=require("./routes/Tag.js"),file=require("./routes/File.js"),keys=require("./config/keys"),app=express();app.use(cors()),app.use(bodyParser.urlencoded({extended:!1})),app.use(bodyParser.json()),mongoose.connect(keys.url,{useNewUrlParser:!0}).then(()=>console.log("Mongodb Connected")).catch(e=>console.log(e)),mongoose.set("useNewUrlParser",!0).set("useFindAndModify",!1).set("useCreateIndex",!0),app.use(passport.initialize()),require("./config/passport")(passport),app.use("/user",user),app.use("/tag",tag),app.use("/file",file);const port=process.env.PORT||5e3;app.listen(port,()=>console.log(`Server running on port ${port}`));